/*!
    \copyright Copyright (c) 2022 Qualcomm Technologies International, Ltd.
        All Rights Reserved.
        Qualcomm Technologies International, Ltd. Confidential and Proprietary.
    \version %%version
    \file 
    \brief The tws_topology_twm_primary rule table definitions. This file is generated by rulegen.py.
*/

#include <rules_engine.h>
#include <tws_topology_common_primary_rule_functions.h>
#include <tws_topology_twm_primary_rule_functions.h>
#include <tws_topology_rule_events.h>
#include <tws_topology_primary_ruleset.h>
#include <tws_topology_goals.h>

const size_t tws_topology_twm_primary_rules_count = 11;

/*! TWS Topology TWM rules deciding behaviour in a Primary role. */
const rule_entry_t tws_topology_twm_primary_rules[] =
{
    /*! When Earbud is taken out of the case, decide if role selection should be executed. */
    RULE(TWSTOP_RULE_EVENT_OUT_CASE, ruleTwsTopTwmPriFindRole, tws_topology_goal_find_role),

    /*! When case is opened, decide if role selection should be executed. */
    RULE(TWSTOP_RULE_EVENT_CASE_LID_OPEN, ruleTwsTopTwmPriFindRole, tws_topology_goal_find_role),

    /*! When peer BREDR link is lost, decide if Primary Earbud should start role selection. */
    RULE(TWSTOP_RULE_EVENT_PEER_LINKLOSS, ruleTwsTopPriPeerLostFindRole, tws_topology_goal_primary_find_role),

    /*! When peer BREDR link is disconnected, decide if Primary Earbud should start role selection. */
    RULE(TWSTOP_RULE_EVENT_PEER_DISCONNECTED_BREDR, ruleTwsTopPriPeerLostFindRole, tws_topology_goal_primary_find_role),

    /*! When Secondary fails to connect BREDR ACL after role selection, decide if Primary Earbud should restart role selection. */
    RULE(TWSTOP_RULE_EVENT_FAILED_PEER_CONNECT, ruleTwsTopPriPeerLostFindRole, tws_topology_goal_primary_find_role),

    /*! When Primary Earbud goes in the case, decide if links should be dropped and it should transition to no role. */
    RULE(TWSTOP_RULE_EVENT_IN_CASE, ruleTwsTopTwmPriNoRoleIdle, tws_topology_goal_no_role_idle),

    /*! Case lid is closed, decide if links should be dropped and it should transition to no role. */
    RULE(TWSTOP_RULE_EVENT_CASE_LID_CLOSED, ruleTwsTopTwmPriNoRoleIdle, tws_topology_goal_no_role_idle),

    /*! When role switch completed, decide if page scan should be enabled for handset connections. */
    RULE(TWSTOP_RULE_EVENT_ROLE_SWITCH, ruleTwsTopPriEnableConnectableHandset, tws_topology_goal_connectable_handset),

    /*! After HDMA recommendation, decide whether to initiate Handover. */
    RULE(TWSTOP_RULE_EVENT_HANDOVER, ruleTwsTopTwmHandoverStart, tws_topology_goal_dynamic_handover),

    /*! If Handover fails and connect_handset was stopped for handover then resume connect_handset to Primary. */
    RULE(TWSTOP_RULE_EVENT_HANDOVER_FAILED, ruleTwsTopPriRoleSwitchConnectHandset, tws_topology_goal_connect_handset),

    /*! Decide if need to find the role after no role is set */
    RULE(TWSTOP_RULE_EVENT_NO_ROLE, ruleTwsTopTwmPriFindRole, tws_topology_goal_find_role),

} ;

